<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sudoku 6x6 obraz do Canvy</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
  }
  #canvas {
    border: 2px solid black;
    margin-top: 20px;
  }
  button {
    margin-top: 10px;
    padding: 8px 16px;
    font-size: 16px;
  }
</style>
</head>
<body>

<h1>Sudoku 6x6 - generuj obraz do Canvy</h1>

<label for="puzzleName">Nazwa:</label>
<input type="text" id="puzzleName" placeholder="Easy 6x6 No. 1" style="width: 150px" />

<br/>

<button id="drawBtn">Wygeneruj obraz Sudoku</button>
<button id="copyBtn">Kopiuj obraz do schowka</button>

<canvas id="canvas" width="300" height="320"></canvas>

<script>
  // Przykładowe dane Sudoku 6x6 - plansza i rozwiązanie
  const board = [
    ['5', '', '', '3', '', ''],
    ['', '', '4', '', '', '6'],
    ['', '2', '', '', '5', ''],
    ['', '5', '', '', '1', ''],
    ['3', '', '', '6', '', ''],
    ['', '', '6', '', '', '2']
  ];
  const solution = [
    ['5', '1', '6', '3', '2', '4'],
    ['2', '3', '4', '1', '7', '6'],
    ['6', '2', '1', '4', '5', '3'],
    ['4', '5', '3', '2', '1', '7'],
    ['3', '6', '7', '6', '4', '5'],
    ['1', '4', '6', '5', '3', '2']
  ];

  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  function drawSudoku(showSolution = false) {
    const size = 6;
    const cellSize = 40;
    const offsetX = 20;
    const offsetY = 60;

    // Czyścimy
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Napis na górze
    const puzzleName = document.getElementById('puzzleName').value.trim() || "Easy 6x6 No. 1";
    ctx.font = "bold 18px Arial";
    ctx.fillStyle = "black";
    ctx.fillText(puzzleName, offsetX, 30);

    // Rysujemy planszę
    ctx.lineWidth = 2;
    ctx.strokeStyle = "black";

    // Tło białe
    ctx.fillStyle = "white";
    ctx.fillRect(offsetX, offsetY, cellSize*size, cellSize*size);

    // Siatka i pogrubienia bloków (2x3)
    for(let r=0; r <= size; r++) {
      ctx.lineWidth = (r % 2 === 0) ? 3 : 1;
      ctx.beginPath();
      ctx.moveTo(offsetX, offsetY + r*cellSize);
      ctx.lineTo(offsetX + cellSize*size, offsetY + r*cellSize);
      ctx.stroke();
    }
    for(let c=0; c <= size; c++) {
      ctx.lineWidth = (c % 3 === 0) ? 3 : 1;
      ctx.beginPath();
      ctx.moveTo(offsetX + c*cellSize, offsetY);
      ctx.lineTo(offsetX + c*cellSize, offsetY + cellSize*size);
      ctx.stroke();
    }

    // Wpisujemy cyfry planszy (lub rozwiązanie jeśli showSolution)
    ctx.font = "bold 24px Arial";
    ctx.fillStyle = "black";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    for(let r=0; r < size; r++) {
      for(let c=0; c < size; c++) {
        const val = showSolution ? solution[r][c] : board[r][c];
        if(val !== '') {
          ctx.fillText(val, offsetX + c*cellSize + cellSize/2, offsetY + r*cellSize + cellSize/2);
        }
      }
    }

    // Napis pod planszą
    if(showSolution) {
      ctx.font = "italic 14px Arial";
      ctx.fillText("Rozwiązanie", offsetX + cellSize*size/2, offsetY + cellSize*size + 25);
    }
  }

  document.getElementById('drawBtn').addEventListener('click', () => {
    drawSudoku(false);
  });

  document.getElementById('copyBtn').addEventListener('click', async () => {
    try {
      // kopiujemy zawartość canvas jako obraz do schowka
      canvas.toBlob(async (blob) => {
        try {
          await navigator.clipboard.write([
            new ClipboardItem({'image/png': blob})
          ]);
          alert('Obraz Sudoku skopiowany do schowka! Możesz teraz wkleić do Canvy lub innego edytora.');
        } catch(e) {
          alert('Błąd kopiowania do schowka: ' + e);
        }
      });
    } catch(e) {
      alert('Twój browser nie wspiera kopiowania obrazów do schowka.');
    }
  });

  // Na start rysujemy pustą planszę
  drawSudoku(false);
</script>

</body>
</html>
