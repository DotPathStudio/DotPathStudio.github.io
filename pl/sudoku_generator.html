<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sudoku Generator + kopiuj obraz</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 650px;
    margin: auto;
    text-align: center;
  }
  label, select, input {
    font-size: 16px;
    margin: 5px;
  }
  button {
    font-size: 16px;
    padding: 8px 14px;
    margin: 10px 6px 10px 6px;
    cursor: pointer;
  }
  #canvas {
    border: 3px solid black;
    margin-top: 20px;
  }
</style>
</head>
<body>

<h1>Sudoku 6x6 i 9x9 – Generator i kopiuj obraz</h1>

<div>
  <label for="size">Rozmiar:</label>
  <select id="size">
    <option value="6">6 x 6</option>
    <option value="9" selected>9 x 9</option>
  </select>

  <label for="difficulty">Poziom:</label>
  <select id="difficulty">
    <option value="easy" selected>Easy</option>
    <option value="medium">Medium</option>
  </select>
</div>

<div>
  <input type="text" id="puzzleName" placeholder="Easy 6x6 No. 1" style="width: 180px; margin-top:10px;" />
</div>

<div>
  <button id="generateBtn">Generuj planszę</button>
  <button id="showAnswerBtn">Pokaż rozwiązanie</button>
  <button id="copyBtn">Kopiuj obraz do schowka</button>
</div>

<canvas id="canvas" width="400" height="440"></canvas>

<script>
  // Przykładowe dane plansz 6x6 i 9x9, easy i medium (możesz rozbudować)
  const puzzles = {
    6: {
      easy: {
        board: [
          ['5', '', '', '3', '', ''],
          ['', '', '4', '', '', '6'],
          ['', '2', '', '', '5', ''],
          ['', '5', '', '', '1', ''],
          ['3', '', '', '6', '', ''],
          ['', '', '6', '', '', '2']
        ],
        solution: [
          ['5', '1', '6', '3', '2', '4'],
          ['2', '3', '4', '1', '7', '6'],
          ['6', '2', '1', '4', '5', '3'],
          ['4', '5', '3', '2', '1', '7'],
          ['3', '6', '7', '6', '4', '5'],
          ['1', '4', '6', '5', '3', '2']
        ]
      },
      medium: {
        board: [
          ['', '6', '', '', '2', ''],
          ['3', '', '', '6', '', ''],
          ['', '', '2', '', '', '4'],
          ['5', '', '', '3', '', ''],
          ['', '', '4', '', '', '6'],
          ['', '3', '', '', '5', '']
        ],
        solution: [
          ['4', '6', '5', '1', '2', '3'],
          ['3', '1', '7', '6', '4', '2'],
          ['6', '5', '2', '7', '3', '4'],
          ['5', '2', '6', '3', '1', '7'],
          ['1', '7', '4', '2', '6', '5'],
          ['2', '3', '1', '4', '5', '6']
        ]
      }
    },
    9: {
      easy: {
        board: [
          ['5','3','','','7','','','',''],
          ['6','','','1','9','5','','',''],
          ['','9','8','','','','','6',''],
          ['8','','','','6','','','','3'],
          ['4','','','8','','3','','','1'],
          ['7','','','','2','','','','6'],
          ['','6','','','','','2','8',''],
          ['','','','4','1','9','','','5'],
          ['','','','','8','','','7','9']
        ],
        solution: [
          ['5','3','4','6','7','8','9','1','2'],
          ['6','7','2','1','9','5','3','4','8'],
          ['1','9','8','3','4','2','5','6','7'],
          ['8','5','9','7','6','1','4','2','3'],
          ['4','2','6','8','5','3','7','9','1'],
          ['7','1','3','9','2','4','8','5','6'],
          ['9','6','1','5','3','7','2','8','4'],
          ['2','8','7','4','1','9','6','3','5'],
          ['3','4','5','2','8','6','1','7','9']
        ]
      },
      medium: {
        board: [
          ['','','','','','3','','',''],
          ['5','3','','','','','','','9'],
          ['','','','7','6','','','4',''],
          ['','','','9','','','','','2'],
          ['','','7','','','5','1','',''],
          ['6','','','','','','','',''],
          ['','6','','','8','','','',''],
          ['','7','','','','','','','6'],
          ['','','','','','2','','','']
        ],
        solution: [
          ['7','8','1','2','4','3','9','5','6'],
          ['5','3','4','1','7','6','2','8','9'],
          ['2','9','6','7','5','8','1','4','3'],
          ['1','4','3','9','6','7','5','2','8'],
          ['9','2','7','8','1','5','6','3','4'],
          ['6','5','8','3','9','4','7','1','2'],
          ['4','6','9','5','8','1','3','7','2'],
          ['3','7','2','4','9','1','8','6','5'],
          ['8','1','5','6','2','7','4','9','3']
        ]
      }
    }
  };

  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  let currentBoard = null;
  let currentSolution = null;
  let currentSize = 9;
  let currentDifficulty = 'easy';

  function capitalize(s) {
    return s.charAt(0).toUpperCase() + s.slice(1);
  }

  function drawSudoku(name, board, solution, size, showSolution = false) {
    const cellSize = size === 9 ? 40 : 50;
    const offsetX = 20;
    const offsetY = 80;
    canvas.width = offsetX * 2 + cellSize * size;
    canvas.height = offsetY + cellSize * size + 60;

    // Czyścimy
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Napis na górze
    ctx.font = "bold 20px Arial";
    ctx.fillStyle = "black";
    ctx.textAlign = "left";
    ctx.fillText(name, offsetX, 40);

    // Tło planszy białe
    ctx.fillStyle = "white";
    ctx.fillRect(offsetX, offsetY, cellSize*size, cellSize*size);

    // Siatka i pogrubienia bloków
    const blockRowSize = size === 9 ? 3 : 2;
    const blockColSize = size === 9 ? 3 : 3;

    for(let r=0; r <= size; r++) {
      ctx.lineWidth = (r % blockRowSize === 0) ? 3 : 1;
      ctx.beginPath();
      ctx.moveTo(offsetX, offsetY + r*cellSize);
      ctx.lineTo(offsetX + cellSize*size, offsetY + r*cellSize);
      ctx.stroke();
    }
    for(let c=0; c <= size; c++) {
      ctx.lineWidth = (c % blockColSize === 0) ? 3 : 1;
      ctx.beginPath();
      ctx.moveTo(offsetX + c*cellSize, offsetY);
      ctx.lineTo(offsetX + c*cellSize, offsetY + cellSize*size);
      ctx.stroke();
    }

    // Wpisujemy cyfry (plansza lub rozwiązanie)
    ctx.font = size === 9 ? "bold 24px Arial" : "bold 28px Arial";
    ctx.fillStyle = "black";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    for(let r=0; r < size; r++) {
      for(let c=0; c < size; c++) {
        let val = showSolution ? solution[r][c] : board[r][c];
        if(val !== '') {
          ctx.fillText(val, offsetX + c*cellSize + cellSize/2, offsetY + r*cellSize + cellSize/2);
        }
      }
    }

    // Napis pod planszą
    ctx.font = "italic 16px Arial";
    ctx.textAlign = "center";
    if(showSolution) {
      ctx.fillText("Rozwiązanie", offsetX + cellSize*size/2, offsetY + cellSize*size + 30);
    }
  }

  function generatePuzzle() {
    const size = parseInt(document.getElementById('size').value);
    const difficulty = document.getElementById('difficulty').value;
    const puzzleNameInput = document.getElementById('puzzleName');
    let puzzleName = puzzleNameInput.value.trim();
    if(!puzzleName) {
      puzzleName = `${capitalize(difficulty)} ${size}x${size} No.`;
      puzzleNameInput.value = puzzleName;
    }

    currentSize = size;
    currentDifficulty = difficulty;
    currentBoard = puzzles[size][difficulty].board;
    currentSolution = puzzles[size][difficulty].solution;

    drawSudoku(puzzleName, currentBoard, currentSolution, size, false);
  }

  function showAnswer() {
    if(!currentSolution) return;
    const puzzleName = document.getElementById('puzzleName').value.trim() || `${capitalize(currentDifficulty)} ${currentSize}x${currentSize} No.`;
    drawSudoku(puzzleName, currentBoard, currentSolution, currentSize, true);
  }

  async function copyCanvasImage() {
    try {
      canvas.toBlob(async (blob) => {
        try {
          await navigator.clipboard.write([
            new ClipboardItem({'image/png': blob})
          ]);
          alert('Obraz Sudoku skopiowany do schowka! Możesz wkleić go np. do Canvy.');
        } catch(e) {
          alert('Błąd kopiowania do schowka: ' + e);
        }
      });
    } catch(e) {
      alert('Twoja przeglądarka nie wspiera kopiowania obrazów do schowka.');
    }
  }

  document.getElementById('generateBtn').addEventListener('click', generatePuzzle);
  document.getElementById('showAnswerBtn').addEventListener('click', showAnswer);
  document.getElementById('copyBtn').addEventListener('click', copyCanvasImage);

  // Na start generujemy planszę domyślną
  generatePuzzle();
</script>

</body>
</html>
